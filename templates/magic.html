<!doctype html>
<html>
<head>
<title>MagicEye.js Text Example</title>
<script>
#magiceye {
	position: absolute;
	left: 0px;
	top: 0px;
	display: inline-block;
}
#magicbg {
	position: absolute;
	left: 0px;
	top: 0px;
	display: inline-block;
	width: 800px;
	height: 600px;
	background: red;
}	

</script>
</head>
<body>
<script src="js/magiceye.js" type="text/javascript"></script>
<script src="js/TextDepthMapper.js" type="text/javascript"></script>

<div id="magicbg">
	
</div>
<canvas id="magiceye" width="800" height="600" >
</canvas>
<button style="position:absolute; left:800px; top:0px;" onclick="reRender()">Again</button>

<script src='js/perlin.js'></script>
<script>
	noise.seed(Math.random());
  var colorChain = {};
  for (var i=0;i<600;i++){
  	colorChain[i]={};
  }
  var dMap = [];
  for (var y=0;y<600;y++){
  	  dMap.push([]);
	  for (var x=0;x<800;x++){
	  	  var v = Math.abs(noise.perlin2(x/800,y/600));
	  	  v *= 2;
	  	  if (v > 1){v = 1;}
  		  dMap[y].push(v);
	  }
  }
  
  var dMap = [];
  for (var y=0;y<600;y++){
  	  dMap.push([]);
	  for (var x=0;x<800;x++){
	  	  
  		  dMap[y].push(0);
	  }
  }
  for (var i=0;i<10;i++){
	  for (var y=60+i*5;y<60+i*5+400;y++){
		  for (var x=210+i*5;x<210+i*5+100;x++){
		  
			  dMap[y][x] = (i+1)/10;
		  }
	  }
  }
  
  
  MagicEye.render({
    el: 'magiceye',
    depthMap: dMap
  });
  
  /*
  MagicEye.render({
    el: 'magiceye',
    depthMapper: new MagicEye.TextDepthMapper('Hello Wor')
  });*/
  var c = 0;
  function reRender() {
  	var dMap = [];
	  for (var y=0;y<600;y++){
		  dMap.push([]);
		  for (var x=0;x<800;x++){
		  
			  dMap[y].push(0);
		  }
	  }
	  for (var i=1;i<10;i++){
		  for (var y=60+i*5;y<60+i*5+400;y++){
			  for (var x=210+i*5;x<210+i*5+100+c*5;x++){
		  
				  dMap[y][x] = (i+1)/10;
			  }
		  }
	  }
	  c++;
  	MagicEye.render({
		el: 'magiceye',
		depthMap: dMap
	  });
  }
  

</script>
</body>
</html>
